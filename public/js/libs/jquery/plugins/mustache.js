(function(s){var v=function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},t=function(a){this.tail=this.string=a;this.pos=0},p=function(a,b){this.view=a;this.parent=b;this.clearCache()},l=function(){this.clearCache()},w=function(a){function b(a,b,g){if(!c[a]){var f=w(b);c[a]=function(a,b){return f(a,b,g)}}return c[a]}var c={};return function(c,e,g){for(var f="",j,h,m=0,k=a.length;m<k;++m)switch(j=a[m],j[0]){case "#":h=g.slice(j[3],j[5]);f+=c._section(j[1],e,h,b(m,j[4],g));break;case "^":f+=
c._inverted(j[1],e,b(m,j[4],g));break;case ">":f+=c._partial(j[1],e);break;case "&":f+=c._name(j[1],e);break;case "name":f+=c._escaped(j[1],e);break;case "text":f+=j[1]}return f}},x=function(a){return[RegExp(v(a[0])+"\\s*"),RegExp("\\s*"+v(a[1]))]},h={name:"mustache.js",version:"0.7.2",tags:["{{","}}"]};h.Scanner=t;h.Context=p;h.Writer=l;var B=/\s*/,y=/\s+/,C=/\S/,z=/\s*=/,D=/\s*\}/,E=/#|\^|\/|>|\{|&|=|!/,A=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},F={"&":"&amp;",
"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};h.escape=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return F[a]})};t.prototype.eos=function(){return""===this.tail};t.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=a[0].length,a[0]):""};t.prototype.scanUntil=function(a){var b=this.tail.search(a);switch(b){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=
this.tail.substring(0,b),this.tail=this.tail.substring(b),this.pos+=b}return a};p.make=function(a){return a instanceof p?a:new p(a)};p.prototype.clearCache=function(){this._cache={}};p.prototype.push=function(a){return new p(a,this)};p.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."===a)b=this.view;else for(var c=this;c;){if(0<a.indexOf("."))for(var d=a.split("."),e=0,b=c.view;b&&e<d.length;)b=b[d[e++]];else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}"function"===typeof b&&
(b=b.call(this.view));return b};l.prototype.clearCache=function(){this._cache={};this._partialCache={}};l.prototype.compile=function(a,b){var c=this._cache[a];c||(c=h.parse(a,b),c=this._cache[a]=this.compileTokens(c,a));return c};l.prototype.compilePartial=function(a,b,c){b=this.compile(b,c);return this._partialCache[a]=b};l.prototype.compileTokens=function(a,b){var c=w(a),d=this;return function(a,g){if(g)if("function"===typeof g)d._loadPartial=g;else for(var f in g)d.compilePartial(f,g[f]);return c(d,
p.make(a),b)}};l.prototype.render=function(a,b,c){return this.compile(a)(b,c)};l.prototype._section=function(a,b,c,d){a=b.lookup(a);switch(typeof a){case "object":if(A(a)){c="";for(var e=0,g=a.length;e<g;++e)c+=d(this,b.push(a[e]));return c}return a?d(this,b.push(a)):"";case "function":var f=this;d=a.call(b.view,c,function(a){return f.render(a,b)});return null!=d?d:"";default:if(a)return d(this,b)}return""};l.prototype._inverted=function(a,b,c){a=b.lookup(a);return!a||A(a)&&0===a.length?c(this,b):
""};l.prototype._partial=function(a,b){!(a in this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));var c=this._partialCache[a];return c?c(b):""};l.prototype._name=function(a,b){var c=b.lookup(a);"function"===typeof c&&(c=c.call(b.view));return null==c?"":String(c)};l.prototype._escaped=function(a,b){return h.escape(this._name(a,b))};h.parse=function(a,b){a=a||"";b=b||h.tags;"string"===typeof b&&(b=b.split(y));if(2!==b.length)throw Error("Invalid tags: "+b.join(", "));
for(var c=x(b),d=new t(a),e=[],g=[],f=[],j=!1,l=!1,m,k,n;!d.eos();){m=d.pos;if(n=d.scanUntil(c[0]))for(var q=0,p=n.length;q<p;++q)if(k=n.charAt(q),!RegExp.prototype.test.call(C,k)?f.push(g.length):l=!0,g.push(["text",k,m,m+1]),m+=1,"\n"===k){if(j&&!l)for(;f.length;)g.splice(f.pop(),1);else f=[];l=j=!1}m=d.pos;if(!d.scan(c[0]))break;j=!0;k=d.scan(E)||"name";d.scan(B);"="===k?(n=d.scanUntil(z),d.scan(z),d.scanUntil(c[1])):"{"===k?(n=RegExp("\\s*"+v("}"+b[1])),n=d.scanUntil(n),d.scan(D),d.scanUntil(c[1]),
k="&"):n=d.scanUntil(c[1]);if(!d.scan(c[1]))throw Error("Unclosed tag at "+d.pos);if("/"===k){if(0===e.length)throw Error('Unopened section "'+n+'" at '+m);q=e.pop();if(q[1]!==n)throw Error('Unclosed section "'+q[1]+'" at '+m);}q=[k,n,m,d.pos];g.push(q);if("#"===k||"^"===k)e.push(q);else if("name"===k||"{"===k||"&"===k)l=!0;else if("="===k){b=n.split(y);if(2!==b.length)throw Error("Invalid tags at "+m+": "+b.join(", "));c=x(b)}}if(q=e.pop())throw Error('Unclosed section "'+q[1]+'" at '+d.pos);for(var c=
[],r,e=0,f=g.length;e<f;++e)d=g[e],"text"===d[0]&&r&&"text"===r[0]?(r[1]+=d[1],r[3]=d[3]):(r=d,c.push(d));r=g=[];d=[];f=0;for(j=c.length;f<j;++f)switch(e=c[f],e[0]){case "#":case "^":d.push(e);r.push(e);r=e[4]=[];break;case "/":d.pop()[5]=e[2];r=0<d.length?d[d.length-1][4]:g;break;default:r.push(e)}return g};var u=new l;h.clearCache=function(){return u.clearCache()};h.compile=function(a,b){return u.compile(a,b)};h.compilePartial=function(a,b,c){return u.compilePartial(a,b,c)};h.compileTokens=function(a,
b){return u.compileTokens(a,b)};h.render=function(a,b,c){return u.render(a,b,c)};h.to_html=function(a,b,c,d){a=h.render(a,b,c);if("function"===typeof d)d(a);else return a};"object"===typeof exports&&exports?module.exports=h:"function"===typeof define&&define.amd?define(h):this.Mustache=h;s.mustache=function(a,b,c){return Mustache.render(a,b,c)};s.fn.mustache=function(a,b){return s(this).map(function(c,d){var e=s(d).html().trim(),e=s.mustache(e,a,b);return s(e).get()})}})(jQuery);